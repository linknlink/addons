[supervisord]
nodaemon=true
logfile=/var/log/supervisor/supervisord.log
pidfile=/var/run/supervisord.pid
childlogdir=/var/log/supervisor

; ==================== 依赖服务 ====================

[program:mosquitto]
command=/usr/sbin/mosquitto -c /etc/mosquitto/mosquitto.conf
priority=10
autorestart=true
startsecs=2
startretries=5
stdout_logfile=/dev/fd/1
stdout_logfile_maxbytes=0
stderr_logfile=/dev/fd/2
stderr_logfile_maxbytes=0

[program:mariadb]
command=/usr/bin/mysqld_safe
priority=20
autorestart=true
startsecs=5
startretries=5
stdout_logfile=/dev/fd/1
stdout_logfile_maxbytes=0
stderr_logfile=/dev/fd/2
stderr_logfile_maxbytes=0

; ==================== 业务服务 ====================

[program:iegcloudaccess]
command=/etc/iegcloudaccess/iegcloudaccess /etc/iegcloudaccess/output/iegcloudaccess.toml
directory=/etc/iegcloudaccess
priority=30
autorestart=true
startsecs=5
startretries=5
stdout_logfile=/dev/fd/1
stdout_logfile_maxbytes=0
stderr_logfile=/dev/fd/2
stderr_logfile_maxbytes=0

[program:ha2devicehub]
command=/etc/ha2devicehub/ha2devicehub /etc/ha2devicehub/output/ha2devicehub.toml
directory=/etc/ha2devicehub
priority=30
autorestart=true
startsecs=5
startretries=5
stdout_logfile=/dev/fd/1
stdout_logfile_maxbytes=0
stderr_logfile=/dev/fd/2
stderr_logfile_maxbytes=0

[program:linknlinkedge]
command=/etc/linknlinkedge/linknlinkedge -config /etc/linknlinkedge/config.yaml
directory=/etc/linknlinkedge
priority=30
autorestart=true
startsecs=5
startretries=5
stdout_logfile=/dev/fd/1
stdout_logfile_maxbytes=0
stderr_logfile=/dev/fd/2
stderr_logfile_maxbytes=0
